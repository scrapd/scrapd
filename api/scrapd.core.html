
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>scrapd.core package &#8212; scrapd 3.0.4 documentation</title>
    <link rel="stylesheet" href="../_static/aiohttp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="API Reference" href="modules.html" />
 
<link rel="stylesheet" href="../_static/custom.css" type="text/css" />


<link rel="canonical" href="https://scrapd.github.io/scrapd/api/scrapd.core.html"/>

<meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
<link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet">

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="scrapd-core-package">
<h1>scrapd.core package<a class="headerlink" href="#scrapd-core-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-scrapd.core.apd">
<span id="scrapd-core-apd-module"></span><h2>scrapd.core.apd module<a class="headerlink" href="#module-scrapd.core.apd" title="Permalink to this headline">¶</a></h2>
<p>Define the module containing the function used to scrap data from the APD website.</p>
<dl class="function">
<dt id="scrapd.core.apd.async_retrieve">
<em class="property">async </em><code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">async_retrieve</code><span class="sig-paren">(</span><em class="sig-param">pages=-1</em>, <em class="sig-param">from_=None</em>, <em class="sig-param">to=None</em>, <em class="sig-param">attempts=1</em>, <em class="sig-param">backoff=1</em>, <em class="sig-param">dump=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#async_retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.async_retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve fatality data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pages</strong> (<em>str</em>) – number of pages to retrieve or -1 for all</p></li>
<li><p><strong>from</strong> (<em>str</em>) – the start date</p></li>
<li><p><strong>to</strong> (<em>str</em>) – the end date</p></li>
<li><p><strong>attempts</strong> (<em>int</em>) – number of attempts per report</p></li>
<li><p><strong>backoff</strong> (<em>int</em>) – initial backoff time (second)</p></li>
<li><p><strong>dump</strong> (<em>bool</em>) – dump reports with parsing issues</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the list of fatalities and the number of pages that were read.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.extract_traffic_fatalities_page_details_link">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">extract_traffic_fatalities_page_details_link</code><span class="sig-paren">(</span><em class="sig-param">news_page</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#extract_traffic_fatalities_page_details_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.extract_traffic_fatalities_page_details_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the fatality detail page links from the news page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>news_page</strong> (<em>str</em>) – html content of the new pages</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of links.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list or <cite>None</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.fetch_and_parse">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">fetch_and_parse</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">url</em>, <em class="sig-param">dump=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#fetch_and_parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.fetch_and_parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a fatality page from a URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>aiohttp.ClientSession</em>) – aiohttp session</p></li>
<li><p><strong>url</strong> (<em>str</em>) – detail page URL</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary representing a fatality.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.fetch_detail_page">
<em class="property">async </em><code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">fetch_detail_page</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">url</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#fetch_detail_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.fetch_detail_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the content of a detail page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>aiohttp.ClientSession</em>) – aiohttp session</p></li>
<li><p><strong>url</strong> (<em>str</em>) – request URL</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the page content.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.fetch_news_page">
<em class="property">async </em><code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">fetch_news_page</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">page=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#fetch_news_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.fetch_news_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the content of a specific news page from the APD website.</p>
<p>The page number starts at 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>aiohttp.ClientSession</em>) – aiohttp session</p></li>
<li><p><strong>page</strong> (<em>int</em>) – page number to fetch, defaults to 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the page content.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.fetch_text">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">fetch_text</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">url</em>, <em class="sig-param">params=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#fetch_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.fetch_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the data from a URL as text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>aiohttp.ClientSession</em>) – aiohttp session</p></li>
<li><p><strong>url</strong> (<em>str</em>) – request URL</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – request paramemters, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the data from a URL as text.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.generate_detail_page_urls">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">generate_detail_page_urls</code><span class="sig-paren">(</span><em class="sig-param">titles</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#generate_detail_page_urls"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.generate_detail_page_urls" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the full URLs of the fatality detail pages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>titles</strong> (<em>list</em>) – a list of partial link</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of full links to the fatality detail pages.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.has_next">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">has_next</code><span class="sig-paren">(</span><em class="sig-param">news_page</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#has_next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.has_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>True</cite> if there is another news page available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>news_page</strong> (<em>str</em>) – the news page to parse</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if there is another news page available, <cite>False</cite> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.apd.parse_page">
<code class="sig-prename descclassname">scrapd.core.apd.</code><code class="sig-name descname">parse_page</code><span class="sig-paren">(</span><em class="sig-param">page</em>, <em class="sig-param">url</em>, <em class="sig-param">dump=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/apd.html#parse_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.apd.parse_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the page using all parsing methods available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page</strong> (<em>str</em>) – the content of the fatality page</p></li>
<li><p><strong>url</strong> (<em>str</em>) – detail page URL</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary representing a fatality.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scrapd.core.constant">
<span id="scrapd-core-constant-module"></span><h2>scrapd.core.constant module<a class="headerlink" href="#module-scrapd.core.constant" title="Permalink to this headline">¶</a></h2>
<p>Define the scrapd constants.</p>
<dl class="class">
<dt id="scrapd.core.constant.Fields">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.constant.</code><code class="sig-name descname">Fields</code><a class="reference internal" href="../_modules/scrapd/core/constant.html#Fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.constant.Fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Define the resource constants.</p>
<dl class="attribute">
<dt id="scrapd.core.constant.Fields.AGE">
<code class="sig-name descname">AGE</code><em class="property"> = 'age'</em><a class="headerlink" href="#scrapd.core.constant.Fields.AGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.CASE">
<code class="sig-name descname">CASE</code><em class="property"> = 'case'</em><a class="headerlink" href="#scrapd.core.constant.Fields.CASE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.CRASH">
<code class="sig-name descname">CRASH</code><em class="property"> = 'crash'</em><a class="headerlink" href="#scrapd.core.constant.Fields.CRASH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.DATE">
<code class="sig-name descname">DATE</code><em class="property"> = 'date'</em><a class="headerlink" href="#scrapd.core.constant.Fields.DATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.DECEASED">
<code class="sig-name descname">DECEASED</code><em class="property"> = 'deceased'</em><a class="headerlink" href="#scrapd.core.constant.Fields.DECEASED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.DOB">
<code class="sig-name descname">DOB</code><em class="property"> = 'dob'</em><a class="headerlink" href="#scrapd.core.constant.Fields.DOB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.ETHNICITY">
<code class="sig-name descname">ETHNICITY</code><em class="property"> = 'ethnicity'</em><a class="headerlink" href="#scrapd.core.constant.Fields.ETHNICITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.FATALITIES">
<code class="sig-name descname">FATALITIES</code><em class="property"> = 'fatalities'</em><a class="headerlink" href="#scrapd.core.constant.Fields.FATALITIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.FIRST_NAME">
<code class="sig-name descname">FIRST_NAME</code><em class="property"> = 'first'</em><a class="headerlink" href="#scrapd.core.constant.Fields.FIRST_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.GENDER">
<code class="sig-name descname">GENDER</code><em class="property"> = 'gender'</em><a class="headerlink" href="#scrapd.core.constant.Fields.GENDER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.GENERATION">
<code class="sig-name descname">GENERATION</code><em class="property"> = 'generation'</em><a class="headerlink" href="#scrapd.core.constant.Fields.GENERATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.LAST_NAME">
<code class="sig-name descname">LAST_NAME</code><em class="property"> = 'last'</em><a class="headerlink" href="#scrapd.core.constant.Fields.LAST_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.LATITUDE">
<code class="sig-name descname">LATITUDE</code><em class="property"> = 'latitude'</em><a class="headerlink" href="#scrapd.core.constant.Fields.LATITUDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.LINK">
<code class="sig-name descname">LINK</code><em class="property"> = 'link'</em><a class="headerlink" href="#scrapd.core.constant.Fields.LINK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.LOCATION">
<code class="sig-name descname">LOCATION</code><em class="property"> = 'location'</em><a class="headerlink" href="#scrapd.core.constant.Fields.LOCATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.LONGITUDE">
<code class="sig-name descname">LONGITUDE</code><em class="property"> = 'longitude'</em><a class="headerlink" href="#scrapd.core.constant.Fields.LONGITUDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.MIDDLE_NAME">
<code class="sig-name descname">MIDDLE_NAME</code><em class="property"> = 'middle'</em><a class="headerlink" href="#scrapd.core.constant.Fields.MIDDLE_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.NOTES">
<code class="sig-name descname">NOTES</code><em class="property"> = 'notes'</em><a class="headerlink" href="#scrapd.core.constant.Fields.NOTES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="scrapd.core.constant.Fields.TIME">
<code class="sig-name descname">TIME</code><em class="property"> = 'time'</em><a class="headerlink" href="#scrapd.core.constant.Fields.TIME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scrapd.core.date_utils">
<span id="scrapd-core-date-utils-module"></span><h2>scrapd.core.date_utils module<a class="headerlink" href="#module-scrapd.core.date_utils" title="Permalink to this headline">¶</a></h2>
<p>Define a module to manipulate dates.</p>
<dl class="function">
<dt id="scrapd.core.date_utils.check_dob">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">check_dob</code><span class="sig-paren">(</span><em class="sig-param">dob</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#check_dob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.check_dob" title="Permalink to this definition">¶</a></dt>
<dd><p>In case that a date only contains 2 digits, determine century.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dob</strong> (<em>datetime.date</em>) – DOB</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DOB with 19xx or 20xx as appropriate</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime.date</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.compute_age">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">compute_age</code><span class="sig-paren">(</span><em class="sig-param">date</em>, <em class="sig-param">dob</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#compute_age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.compute_age" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a victim’s age.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>datetime.date</em>) – crash date</p></li>
<li><p><strong>dob</strong> (<em>datetime.date</em>) – date of birth</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the victim’s age.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.from_date">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">from_date</code><span class="sig-paren">(</span><em class="sig-param">date</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#from_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.from_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the date from a human readable format, with options for the from date.</p>
<ul class="simple">
<li><p>If the date cannot be parsed, <cite>datetime.date.min</cite> is returned.</p></li>
<li><p>If the day of the month is not specified, the first day is used.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> (<em>str</em>) – date</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a date object representing the date.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime.date</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.is_before">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">is_before</code><span class="sig-paren">(</span><em class="sig-param">d1</em>, <em class="sig-param">d2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#is_before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.is_before" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if d1 is strictly before d2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d1</strong> (<em>datetime.date</em>) – date 1</p></li>
<li><p><strong>d2</strong> (<em>datetime.date</em>) – date 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True is d1 is before d2.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.is_between">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">is_between</code><span class="sig-paren">(</span><em class="sig-param">date</em>, <em class="sig-param">from_=None</em>, <em class="sig-param">to=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#is_between"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.is_between" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a date is comprised between 2 others.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>datetime.date</em>) – date to check</p></li>
<li><p><strong>from</strong> (<em>datetime.date</em>) – start date, defaults to None</p></li>
<li><p><strong>to</strong> (<em>datetime.date</em>) – end date, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>True</cite> if the date is between <cite>from_</cite> and <cite>to</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.parse_date">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">parse_date</code><span class="sig-paren">(</span><em class="sig-param">date</em>, <em class="sig-param">default=None</em>, <em class="sig-param">settings=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#parse_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.parse_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the date from a human readable format.</p>
<p>If no default value is specified and there is an error, an exception is raised. Otherwise the default value is
returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<em>str</em>) – date</p></li>
<li><p><strong>default</strong> (<em>datetime.date</em>) – default value in case the date cannot be parsed.</p></li>
<li><p><strong>settings</strong> (<em>dict</em>) – a dictionary containing the parsing options. All the available options are defined here:
<a class="reference external" href="https://dateparser.readthedocs.io/en/latest/dateparser.html#dateparser.conf.Settings">https://dateparser.readthedocs.io/en/latest/dateparser.html#dateparser.conf.Settings</a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a date object representing the date.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime.date</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.parse_time">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">parse_time</code><span class="sig-paren">(</span><em class="sig-param">time</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#parse_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.parse_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the time from a human readable format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>str</em>) – time</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a time object representing the time.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime.time</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.date_utils.to_date">
<code class="sig-prename descclassname">scrapd.core.date_utils.</code><code class="sig-name descname">to_date</code><span class="sig-paren">(</span><em class="sig-param">date</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/date_utils.html#to_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.date_utils.to_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the date from a human readable format, with options for the to date.</p>
<ul class="simple">
<li><p>If the date cannot be parsed, <cite>datetime.date.max</cite> is returned.</p></li>
<li><p>If the day of the month is not specified, the last day is used.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> (<em>str</em>) – date</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a date object representing the date.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime.date</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scrapd.core.formatter">
<span id="scrapd-core-formatter-module"></span><h2>scrapd.core.formatter module<a class="headerlink" href="#module-scrapd.core.formatter" title="Permalink to this headline">¶</a></h2>
<p>Define the formatter module.</p>
<p>This module contains all the classes with the ability to print the results. They destination depends on the custom
formatter used to print the results and can be sdtout, sdterr, a file or even a remote storage if the formatter allows
it.</p>
<dl class="class">
<dt id="scrapd.core.formatter.CSVFormatter">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">CSVFormatter</code><span class="sig-paren">(</span><em class="sig-param">format_='json'</em>, <em class="sig-param">output=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#CSVFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.CSVFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#scrapd.core.formatter.Formatter" title="scrapd.core.formatter.Formatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">scrapd.core.formatter.Formatter</span></code></a></p>
<p>Define the CSV formatter.</p>
<p>Displays the results as a CSV.</p>
<dl class="method">
<dt id="scrapd.core.formatter.CSVFormatter.printer">
<code class="sig-name descname">printer</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#CSVFormatter.printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.CSVFormatter.printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the printer method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="scrapd.core.formatter.CountFormatter">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">CountFormatter</code><span class="sig-paren">(</span><em class="sig-param">format_='json'</em>, <em class="sig-param">output=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#CountFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.CountFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#scrapd.core.formatter.Formatter" title="scrapd.core.formatter.Formatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">scrapd.core.formatter.Formatter</span></code></a></p>
<p>Define the Count formatter.</p>
<p>Simply displays the number of results matching the search criterias.</p>
<dl class="method">
<dt id="scrapd.core.formatter.CountFormatter.printer">
<code class="sig-name descname">printer</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#CountFormatter.printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.CountFormatter.printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the printer method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="scrapd.core.formatter.Formatter">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">Formatter</code><span class="sig-paren">(</span><em class="sig-param">format_='json'</em>, <em class="sig-param">output=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#Formatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.Formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Define the Formatter base class.</p>
<p>The default printer method simply uses the <cite>print()</cite> function.</p>
<dl class="attribute">
<dt id="scrapd.core.formatter.Formatter.formatters">
<code class="sig-name descname">formatters</code><em class="property"> = {'count': &lt;class 'scrapd.core.formatter.CountFormatter'&gt;, 'csv': &lt;class 'scrapd.core.formatter.CSVFormatter'&gt;, 'json': &lt;class 'scrapd.core.formatter.JSONFormatter'&gt;, 'python': &lt;class 'scrapd.core.formatter.PythonFormatter'&gt;}</em><a class="headerlink" href="#scrapd.core.formatter.Formatter.formatters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="scrapd.core.formatter.Formatter.print">
<code class="sig-name descname">print</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#Formatter.print"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.Formatter.print" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the results with the appropriate formatter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="scrapd.core.formatter.Formatter.printer">
<code class="sig-name descname">printer</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#Formatter.printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.Formatter.printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the printer method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="scrapd.core.formatter.JSONFormatter">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">JSONFormatter</code><span class="sig-paren">(</span><em class="sig-param">format_='json'</em>, <em class="sig-param">output=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#JSONFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.JSONFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#scrapd.core.formatter.Formatter" title="scrapd.core.formatter.Formatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">scrapd.core.formatter.Formatter</span></code></a></p>
<p>Define the JSON formatter.</p>
<p>Displays the results as JSON. The keys are sorted and an indentation of 2 spaces is set.</p>
<dl class="method">
<dt id="scrapd.core.formatter.JSONFormatter.printer">
<code class="sig-name descname">printer</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#JSONFormatter.printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.JSONFormatter.printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the printer method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="scrapd.core.formatter.PythonFormatter">
<em class="property">class </em><code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">PythonFormatter</code><span class="sig-paren">(</span><em class="sig-param">format_='json'</em>, <em class="sig-param">output=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#PythonFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.PythonFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#scrapd.core.formatter.Formatter" title="scrapd.core.formatter.Formatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">scrapd.core.formatter.Formatter</span></code></a></p>
<p>Define the Python formatter.</p>
<p>Displays the results using <cite>PrettyPrinter</cite> with an indentation of 2 spaces.</p>
<dl class="method">
<dt id="scrapd.core.formatter.PythonFormatter.printer">
<code class="sig-name descname">printer</code><span class="sig-paren">(</span><em class="sig-param">results</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#PythonFormatter.printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.PythonFormatter.printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the printer method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>results</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – the results to display.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="scrapd.core.formatter.json_serializers">
<code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">json_serializers</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#json_serializers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.json_serializers" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert custom objects to string for serialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="scrapd.core.formatter.to_json">
<code class="sig-prename descclassname">scrapd.core.formatter.</code><code class="sig-name descname">to_json</code><span class="sig-paren">(</span><em class="sig-param">results</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/formatter.html#to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.formatter.to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert dict of parsed fields to JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict</strong> (<em>results</em>) – results of scraping APD news site</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-scrapd.core.version">
<span id="scrapd-core-version-module"></span><h2>scrapd.core.version module<a class="headerlink" href="#module-scrapd.core.version" title="Permalink to this headline">¶</a></h2>
<p>Define a set of utility functions for managing versions.</p>
<dl class="function">
<dt id="scrapd.core.version.detect_from_metadata">
<code class="sig-prename descclassname">scrapd.core.version.</code><code class="sig-name descname">detect_from_metadata</code><span class="sig-paren">(</span><em class="sig-param">package</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/scrapd/core/version.html#detect_from_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapd.core.version.detect_from_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect a package version number from the metadata.</p>
<p>If the version number cannot be detected, the function returns 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>package</strong> (<em>str</em>) – package name</p>
</dd>
<dt class="field-even">Returns str</dt>
<dd class="field-even"><p>the package version number.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/scrapd-logo-128x152.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Easily scrap APD traffic death repports</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=scrapd&repo=scrapd&type=star&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>







<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">ScrAPD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Detailed usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">scrapd.core package</a></li>
</ul>
</li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Rémy Greinhofer.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      
      |
      <a href="../_sources/api/scrapd.core.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/scrapd/scrapd" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>